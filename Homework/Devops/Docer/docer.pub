1. Install Docker on EC2 Ubuntu:


# Update package index
sudo apt update

# Install dependencies to use HTTPS
sudo apt install apt-transport-https ca-certificates curl software-properties-common

# Add Docker’s official GPG key
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# Add Docker repository to APT sources
sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"

# Update package index again
sudo apt update

# Install Docker
sudo apt install docker.io

# Start Docker service
sudo systemctl start docker

# Enable Docker to start on boot
sudo systemctl enable docker


2. Write Dockerfile for Ubuntu latest image with Nginx installed and simple Nginx conf file added to enabled sites directory


# mkdir ~/Doker_test -> touch dockerfile 
			touch nginx.conf

# vim dockerfile ->



# Use Ubuntu latest image
FROM ubuntu:latest

# Update package index and install Nginx
RUN apt-get update && apt-get install -y nginx

# Copy a simple Nginx configuration to enabled sites directory
COPY nginx.conf /etc/nginx/sites-enabled/default

# Expose port 80
EXPOSE 80

# Start Nginx when the container starts
CMD ["nginx", "-g", "daemon off;"]


# vim nginx.conf ->



# nginx.conf

user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

    access_log /var/log/nginx/access.log main;

    sendfile on;
    keepalive_timeout 65;

    server {
        listen 80;
        server_name localhost;

        location / {
            root /usr/share/nginx/html;
            index index.html;
        }
    }
}


3.1 Build the image and push it to Docker Hub:

 # Build the Docker image
sudo docker build -t nginx:latest .

3.2 Push the image to Docker Hub:
 # Log in to Docker Hub
sudo docker login

 # Push the image to your Docker Hub repository (replace 'your_username' and 'image_name')
sudo  docker tag nginx:latest narek1991/nginx-custom:latest
sudo docker push narek1991/nginx-custom:latest


[ 4. Run a container from the created Dockerfile: ???

# Run a container from the image you pushed (replace 'your_username' and 'image_name')
sudo docker run -d -p 80:80 your_username/image_name ]

5. "Login" to the container, install and run the htop command:

# List running containers
sudo docker ps

# Replace 'container_id' with your copied Container ID
sudo docker exec -it container_id /bin/bash

# Update package index and install htop
sudo apt-get update
sudo apt-get install htop
sudo htop










